<h1 class="page-header main">Billing Invoice</h1>
<div class="col-md-3 main">            
  <p class="lead">Add New Items</p>

  <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" id="itemsMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
      Item: {{selectedItem.itemName}}
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu scrollable-menu" aria-labelledby="itemsMenu">
      <li>
        <div class="input-group input-group-sm search-control"> 
          <span class="input-group-addon">
            <span class="glyphicon glyphicon-search"></span>
          </span>
          <input type="text" class="form-control" placeholder="Item Search" ng-model="searchKeyword"/>
        </div>
      </li>
      <li ng-repeat="item in items | filter: searchKeyword"><a ng-click="dropdownItemSelected(item)">{{item.itemName}}</a></li>
    </ul>
  </div>

  <form role="form" name="myForm" novalidate>
    <div class="form-group">
      <label>Barcode:</label>
      <span type="text" class=" form-control" id="barcode" ng-model="barcode" required>{{selectedItem.barcode}}</span>
    </div>
    <div class="form-group">
      <label>ItemName:</label>
      <span type="text" class=" form-control" id="itemName" ng-model="itemName" required>{{selectedItem.itemName}}</span>
    </div>
    <div class="form-group">
      <label>MRP:</label>
      <span type="text" class=" form-control" id="salesPrice" ng-model="salesPrice" required>{{selectedItem.salesPrice}}</span>
    </div>
    <div class="form-group">
      <label>Quantity:</label>
      <input type="text" class="form-control" id="quantity" ng-model="quantity" required>
    </div>
    <div class="form-group">
      <label>Total:</label>
      <span class="form-control" id="total">{{selectedItem.salesPrice * quantity || 0}}</span>
    </div>
    <button type="Submit" class="btn btn-primary" ng-click="addItems()" ng-disabled="!checkMyFormValidity()">AddItem</button>
  </form>
</div>


<div class="col-md-9 main">
  <p class="lead">Purchased Items</p>
  <button type="button" class="btn btn-primary btn-lg" ng-click="selectPaymentTypeOpen()" ng-disabled="!checkPurchaseItemsValidity()">Select Payment Type</button>
  <button type="button" class="btn btn-default btn-lg" ng-click="addCustomerDetailsOpen()" ng-disabled="!checkPurchaseItemsValidity()">Add Customer Details</button>
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>#</th>
          <th>Barcode</th>
          <th>Item</th>
          <th>Quantity</th>
          <th>MRP</th>
          <th>Total</th>
        </tr>                  
      </thead>
      <tbody>                  
        <tr ng-repeat="i in billingInvoice.billingInvoicesItemsList"><td>{{$index + 1}}</td><td>{{i.barcode}}</td><td>{{i.itemName}}</td><td>{{i.quantity}}</td><td>{{i.salesPrice | currency:"&#8377;"}}</td><td>{{i.total | currency:"&#8377;"}}</td>
        </tr>                          
      </tbody>
    </table>
  </div>
  <div style="font-size:24px; display:inline-block" class="col-md-4  main" id="results">Cash: {{billingInvoice.cash | currency:"&#8377;"}}</div>
  <div style="font-size:24px; display:inline-block" class="col-md-4 main" id="results">Credit: {{billingInvoice.credit | currency:"&#8377;"}}</div>
  <div style="font-size:24px; display:inline-block" class="col-md-4 main" id="results">Total: {{billingInvoice.totalAmount | currency:"&#8377;"}}</div>            
  <button type="button" class="btn btn-lg btn-primary col-md-offset-9" ng-click="createBillingInvoice()" ng-disabled="!checkBillInvoiceValidity()">Bill Invoice</button>
</div>

  <!-- Select Payment Type Modal start -->
  <script type="text/ng-template" id="selectPaymentTypeModal.html">
        <div class="modal-header">
            <h3 class="modal-title">How would you like to Pay?</h3>
        </div>
        <h4 class="modal-title">Total Amount: {{billingInvoice.totalAmount}}</h4>
        <div class="modal-body">
          <form role="form">
            <div class="form-group">
              <label>Cash:</label>
              <input type="text" class="form-control" id="cash" ng-model="cash">
            </div>
            <div class="form-group">
              <label>Credit:</label>
              <input type="text" class="form-control" id="credit" ng-model="credit">
            </div>
          </form>
        </div>       

        <div class="modal-footer">
          <button type="button" ng-click="cancel()">Close</button>
          <button type="Submit" class="btn btn-primary" ng-click="addPaymentType()" ng-disabled="!checkSelectPaymentValidity()">Add Payment Type</button>
        </div>           

  </script>
<!-- Select Payment Type Modal End -->

<!-- Add Customer Details Modal start -->
  <script type="text/ng-template" id="addCustomerDetailsModal.html">
        <div class="modal-header">
            <h3 class="modal-title">Add Customer Details</h3>
        </div>
        <div class="modal-body">
          <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="customersMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
              Customer: {{selectedCustomer.name}}
              <span class="caret"></span>
            </button>
            <ul class="dropdown-menu scrollable-menu" aria-labelledby="customersMenu">
              <li>
                <div class="input-group input-group-sm search-control"> 
                  <span class="input-group-addon">
                    <span class="glyphicon glyphicon-search"></span>
                  </span>
                  <input type="text" class="form-control" placeholder="Customer Search" ng-model="searchKeyword"/>
                </div>
              </li>                      
              <li ng-repeat="customer in customers | filter: searchKeyword"><a ng-click="dropdownCustomerSelected(customer)">{{customer.name}}</a></li>
            </ul>
          </div>

          <form role="form" name="myForm" novalidate>
            <div class="form-group">
              <label>Customer Name:</label>
              <span type="text" name="name" class="form-control" id="name" ng-model="name">{{selectedCustomer.name}}</span>
            </div>
            <div class="form-group">
              <label>Customer Email:</label>
              <span type="text" class="form-control" id="email" ng-model="email">{{selectedCustomer.email}}</span>
            </div>
            <div class="form-group">
              <label>Telephone Number</label>
              <span type="text" class="form-control" id="telephoneNo" ng-model="telephoneNo">{{selectedCustomer.telephoneNo}}</span>
            </div>
          </form>
        </div>                      
        <div class="modal-footer">
          <button type="button" ng-click="cancel()">Close</button>
          <button type="Submit" class="btn btn-primary" ng-click="addCustomer()" ng-disabled="selectedCustomer.name === undefined">Add Customer Details</button>
        </div>       
  </script>
<!-- Add Customer Info Modal End -->