<h1 class="page-header main">Billing</h1>
<div class="col-md-12 main">            
  <p class="lead">Listed below are all the Existing Billing Invoices.</p>

  <div style="padding:20px 0px 60px 0px">
    <span class="col-md-1" style="font-weight:bold">Search</span>
    <span class="col-md-3">
      <input type="text" class="form-control" ng-model="searchKeyword"/>
    </span>          
  </div>
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>#</th>
          <th>
            <a ng-click="sortType = 'invoiceName'; sortReverse = !sortReverse">
              InvoiceNumber
              <span ng-show="sortType == 'invoiceName' && !sortReverse" class="dropup"><span class="caret"></span></span>
              <span ng-show="sortType == 'invoiceName' && sortReverse" class="caret"></span>
            </a>
          </th>
          <th>
            <a ng-click="sortType = 'totalAmount'; sortReverse = !sortReverse">
              TotalAmount
              <span ng-show="sortType == 'totalAmount' && !sortReverse" class="dropup"><span class="caret"></span></span>
              <span ng-show="sortType == 'totalAmount' && sortReverse" class="caret"></span>
            </a>
          </th>
          <th>
            <a ng-click="sortType = 'cash'; sortReverse = !sortReverse">
              Cash
              <span ng-show="sortType == 'cash' && !sortReverse" class="dropup"><span class="caret"></span></span>
              <span ng-show="sortType == 'cash' && sortReverse" class="caret"></span>
            </a>
          </th>
          <th>
            <a ng-click="sortType = 'credit'; sortReverse = !sortReverse">
              Credit
              <span ng-show="sortType == 'credit' && !sortReverse" class="dropup"><span class="caret"></span></span>
              <span ng-show="sortType == 'credit' && sortReverse" class="caret"></span>
            </a>
          </th>
          <th>
            <a ng-click="sortType = 'customer.name'; sortReverse = !sortReverse">
              CustomerName
              <span ng-show="sortType == 'customer.name' && !sortReverse" class="dropup"><span class="caret"></span></span>
              <span ng-show="sortType == 'customer.name' && sortReverse" class="caret"></span>
            </a>
          </th>
          <th>
            <a ng-click="sortType = 'createdDate'; sortReverse = !sortReverse">
              CreatedDate
              <span ng-show="sortType == 'createdDate' && !sortReverse" class="dropup"><span class="caret"></span></span>
              <span ng-show="sortType == 'createdDate' && sortReverse" class="caret"></span>
            </a>
          </th>
          <th>
            <a ng-click="sortType = 'updatedDate'; sortReverse = !sortReverse">
              UpdatedDate
              <span ng-show="sortType == 'updatedDate' && !sortReverse" class="dropup"><span class="caret"></span></span>
              <span ng-show="sortType == 'updatedDate' && sortReverse" class="caret"></span>
            </a>
          </th>
        </tr>                  
      </thead>
      <tbody>                  
        <tr ng-repeat="i in billingInvoices | orderBy:sortType:sortReverse | filter: searchKeyword" ng-click="open(i)" >
          <td>{{$index + 1}}</td>
          <td>{{i.invoiceName}}</td>
          <td>{{i.totalAmount | currency:"&#8377;"}}</td>
          <td>{{i.cash | currency:"&#8377;"}}</td>
          <td>{{i.credit | currency:"&#8377;"}}</td>
          <td>{{i.customer.name}}</td>
          <td>{{i.createdDate | date:'dd/MM/yyyy HH:mm:ss'}}</td>
          <td>{{i.updatedDate | date:'dd/MM/yyyy HH:mm:ss'}}</td>
        </tr>              
      </tbody>
    </table>
  </div>
</div>
 <!-- Modal BillingInvoiceItems start -->
  <script type="text/ng-template" id="billingInvoicesItemsModal.html">
        <div class="modal-header">
            <h3 class="modal-title">Billing Invoice Items</h3>
        </div>
        <div class="modal-body">
            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>ItemName</th>
                    <th>Barcode</th>
                    <th>Quantity</th>
                    <th>MRP</th>
                    <th>Total</th>
                  </tr>                  
                </thead>
                <tbody>                  
                  <tr ng-repeat="i in billingInvoicesItems"><td>{{$index + 1}}</td><td>{{i.itemName}}</td><td>{{i.barcode}}</td><td>{{i.quantity}}</td><td>{{i.salesPrice | currency:"&#8377;"}}</td><td>{{i.total | currency:"&#8377;"}}</td></tr>              
                </tbody>
              </table>
            </div> 
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
        </div>
  </script>
<!-- Modal BillingInvoiceItems End -->